/**
 * @file ext-shapes.js
 *
 * @license MIT
 *
 * @copyright 2010 Christian Tzurcanu, 2010 Alexis Deveria
 *
 */
const e="shapes",loadExtensionTranslation=async function(t){let i;const c=t.configObj.pref("lang");try{i=await function __variableDynamicImportRuntime0__(e){switch(e){case"./locale/en.js":return Promise.resolve().then((function(){return a}));case"./locale/fr.js":return Promise.resolve().then((function(){return o}));case"./locale/sv.js":return Promise.resolve().then((function(){return l}));case"./locale/tr.js":return Promise.resolve().then((function(){return s}));case"./locale/uk.js":return Promise.resolve().then((function(){return n}));case"./locale/zh-CN.js":return Promise.resolve().then((function(){return r}));default:return new Promise((function(t,a){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`./locale/${c}.js`)}catch(t){console.warn(`Missing translation (${c}) for ${e} - using 'en'`),i=await Promise.resolve().then((function(){return a}))}t.i18next.addResourceBundle(c,e,i.default)};var t={name:e,async init(){const t=this,a=t.svgCanvas,{$id:o,$click:l}=a,s=a.getSvgRoot();let n={};await loadExtensionTranslation(t);const r="shapelib",i={};let c,m,u,h,d,b;return{callback(){if(null===o("tool_shapelib")){const s=t.configObj.curConfig.extPath,n=`\n          <se-explorerbutton id="tool_shapelib" title="${t.i18next.t(`${e}:buttons.0.title`)}" lib="${s}/ext-shapes/shapelib/"\n          src="shapelib.svg"></se-explorerbutton>\n          `;a.insertChildAtIndex(o("tools_left"),n,9),l(o("tool_shapelib"),(()=>{this.leftPanel.updateLeftPanel("tool_shapelib")&&a.setMode(r)}))}},mouseDown(e){if(a.getMode()!==r)return;const t=document.getElementById("tool_shapelib").dataset.draw;d=e.start_x;const o=d;b=e.start_y;const l=b,s=a.getStyle();i.x=e.event.clientX,i.y=e.event.clientY,h=a.addSVGElementsFromJson({element:"g",attr:{id:a.getNextId()}}),c=a.addSVGElementsFromJson({element:"path",curStyles:!0,attr:{d:t,id:a.getNextId(),opacity:s.opacity,style:"pointer-events:none","stroke-width":1,fill:"black"}}),a.recalculateDimensions(c),n=c.getBBox();const p=o+.1*a.getWidth(),g=l+20;return u=a.addSVGElementsFromJson({element:"line",curStyles:!0,attr:{x1:o+20,y1:g,x2:p,y2:g,id:a.getNextId(),opacity:s.opacity,style:"pointer-events:none","stroke-width":1}}),m=a.addSVGElementsFromJson({element:"text",curStyles:!0,attr:{x:p,y:g-5,id:a.getNextId(),opacity:s.opacity,style:"pointer-events:none","text-anchor":"middle","font-size":12,"stroke-width":1}}),h.appendChild(c),h.appendChild(u),h.appendChild(m),m.textContent="note",c.setAttribute("transform","translate("+o+","+l+") scale(0.005) translate("+-o+","+-l+")"),a.recalculateDimensions(c),n=c.getBBox(),{started:!0}},mouseMove(e){if(a.getMode()!==r)return;const t=a.getZoom(),o=e.event,l=e.mouse_x/t,i=e.mouse_y/t,h=c.transform.baseVal,p=c.getBBox(),g=p.x,_=p.y,f=(Math.min(d,l),Math.min(b,i),Math.abs(l-d)),y=Math.abs(i-b);let j=f/n.width||1,x=y/n.height||1,w=0;l<d&&(w=n.width);let k=0;i<b&&(k=n.height);const v=s.createSVGTransform(),M=s.createSVGTransform(),S=s.createSVGTransform(),B=a.getWidth();n=c.getBBox();const D=l+.1*B;if(u.setAttribute("y1",n.y+n.height/2),u.setAttribute("y2",n.y+n.height/2),u.setAttribute("x2",D),m.setAttribute("x",D),m.setAttribute("y",n.y+n.height/2-5),v.setTranslate(-(g+w),-(_+k)),!o.shiftKey){const e=Math.min(Math.abs(j),Math.abs(x));j=e*(j<0?-1:1),x=e*(x<0?-1:1)}M.setScale(j,x),S.setTranslate(g+w,_+k),h.appendItem(S),h.appendItem(M),h.appendItem(v),a.recalculateDimensions(c),n=c.getBBox()},mouseUp(e){if(a.getMode()!==r)return;const t=e.event.clientX!==i.x&&e.event.clientY!==i.y,o=document.getElementById("tool_select");return o&&o.click(),{keep:t,elements:h,started:!1}}}}},a=Object.freeze({__proto__:null,default:{loading:"Loading...",categories:{basic:"Basic",object:"Objects",symbol:"Symbols",arrow:"Arrows",flowchart:"Flowchart",animal:"Animals",game:"Cards & Chess",dialog_balloon:"Dialog balloons",electronics:"Electronics",math:"Mathematical",music:"Music",misc:"Miscellaneous",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Shape library"}]}}),o=Object.freeze({__proto__:null,default:{loading:"Chargement...",categories:{basic:"Basique",object:"Objets",symbol:"Symboles",arrow:"Flèches",flowchart:"Flowchart",animal:"Animaux",game:"Cartes & Echecs",dialog_balloon:"Dialog balloons",electronics:"Electronique",math:"Mathematiques",music:"Musique",misc:"Divers",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Bibliothèque d'images"}]}}),l=Object.freeze({__proto__:null,default:{loading:"Läser in...",categories:{basic:"Grundläggande",object:"Objekt",symbol:"Symboler",arrow:"Pilar",flowchart:"Flödesschema",animal:"Djur",game:"Kort & schack",dialog_balloon:"Dialogballonger",electronics:"Elektronik",math:"Matematisk",music:"Musik",misc:"Diverse",raphael_1:"raphaeljs.com uppsättning 1",raphael_2:"raphaeljs.com uppsättning 2"},buttons:[{title:"Formbibliotek"}]}}),s=Object.freeze({__proto__:null,default:{loading:"Yükleniyor...",categories:{basic:"Temel",object:"Nesneler",symbol:"Semboller",arrow:"Oklar",flowchart:"Akış Şemaları",animal:"Hayvanlar",game:"Kartlar & Satranç",dialog_balloon:"Diyalog baloncukları",electronics:"Elektronikler",math:"Matematikseller",music:"Müzik",misc:"Diğerleri",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Şekil kütüphanesi"}]}}),n=Object.freeze({__proto__:null,default:{loading:"Завантаження...",categories:{basic:"Основні",object:"Об’єкти",symbol:"Символи",arrow:"Стрілки",flowchart:"Блок-схеми",animal:"Тварини",game:"Карти та Шахи",dialog_balloon:"Хмаринки діалогів",electronics:"Електроніка",math:"Математичні",music:"Музика",misc:"Різне",raphael_1:"raphaeljs.com набір 1",raphael_2:"raphaeljs.com набір 2"},buttons:[{title:"Спільна Бібліотека"}]}}),r=Object.freeze({__proto__:null,default:{loading:"正在加载...",categories:{basic:"基本",object:"对象",symbol:"符号",arrow:"箭头",flowchart:"工作流",animal:"动物",game:"棋牌",dialog_balloon:"会话框",electronics:"电子",math:"数学",music:"音乐",misc:"其他",raphael_1:"raphaeljs.com 集合 1",raphael_2:"raphaeljs.com 集合 2"},buttons:[{title:"图元库"}]}});export{t as default};
//# sourceMappingURL=ext-shapes.js.map
